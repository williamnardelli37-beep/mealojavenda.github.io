<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja M&A</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Lato', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #111;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .header-top {
            background-color: #131921;
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo a {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            color: #fff;
            text-decoration: none;
        }
        .search-container {
            flex-grow: 1;
            margin: 0 20px;
            display: flex;
            max-width: 600px;
        }
        .search-container input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px 0 0 5px;
        }
        .search-container button {
            background-color: #febd69;
            border: none;
            padding: 0 15px;
            border-radius: 0 5px 5px 0;
            cursor: pointer;
        }
        .nav-links {
            display: flex;
            align-items: center;
        }
        .nav-links a {
            color: #fff;
            text-decoration: none;
            padding: 0 15px;
            font-weight: bold;
        }
        .nav-links a:hover {
            color: #febd69;
        }
        .cart-link {
            display: flex;
            align-items: center;
            font-size: 1.2em;
        }
        .cart-link i {
            margin-right: 5px;
        }
        .slider-container {
            position: relative;
            width: 100%;
            height: 350px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            color: #fff;
            font-family: 'Lato', Arial, sans-serif;
            background-size: cover;
            background-position: center;
        }
        .slide.active {
            opacity: 1;
        }
        .slide-content {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 20px 40px;
            border-radius: 10px;
            max-width: 600px;
        }
        .slide-content h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            margin-top: 0;
            margin-bottom: 10px;
            color: #fff;
        }
        .slide-content p {
            font-size: 1.2em;
            font-weight: 300;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }
        .section {
            background-color: #fff;
            padding: 40px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .section h2 {
            font-family: 'Playfair Display', serif;
            text-align: center;
            color: #000;
            font-size: 2em;
            margin-bottom: 30px;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .product-item {
            display: flex;
            flex-direction: column;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            cursor: pointer;
            text-align: center;
            padding: 20px;
        }
        .product-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .product-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        .product-details {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .product-details h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5em;
            margin-top: 0;
            margin-bottom: 5px;
        }
        .product-details p {
            font-size: 0.9em;
            margin: 0 0 10px;
            color: #555;
        }
        .product-info-bottom {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        .product-price {
            font-size: 1.5em;
            color: #b12704;
            font-weight: 700;
        }
        .btn-buy-now, .free-trial-btn {
            background-color: #febd69;
            color: #000;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 0.9em;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: background-color 0.3s ease;
            text-decoration: none;
        }
        .btn-buy-now:hover, .free-trial-btn:hover {
            background-color: #e6a03e;
        }
        .badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #004d99;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
            z-index: 10;
        }
        .badge.sale { background-color: #e74c3c; }
        .badge.beta { background-color: #f39c12; }
        .badge.new { background-color: #2ecc71; }
        
        .whatsapp-btn, .contract-btn {
            background-color: rgba(0, 0, 0, 0.5);
            color: #000;
            border: 1px solid #000;
            display: inline-block;
            padding: 12px 25px;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        .whatsapp-btn:hover, .contract-btn:hover {
            background-color: #000;
            color: #fff;
        }
        .contract-btn {
            margin-left: 10px;
        }
        
        footer {
            background-color: #131921;
            color: #fff;
            padding: 20px 0;
            text-align: center;
        }
        .footer-links {
            margin-bottom: 10px;
        }
        .footer-links a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
            font-size: 0.9em;
        }
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .promo-popup, .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            color: #111;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }
        .modal {
            padding: 30px;
            max-width: 600px;
            text-align: left;
            border-radius: 15px;
        }
        .cancellation-modal {
            text-align: center;
        }
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        .modal-buttons .btn {
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
        }
        .modal-buttons .btn-yes {
            background-color: #e74c3c;
            color: #fff;
            border: none;
        }
        .modal-buttons .btn-no {
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
        }
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        .modal-header {
            border-bottom: 2px solid #ddd;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .modal-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2em;
            margin: 0;
        }
        .modal-content-details {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .modal-info-block h4 {
            font-size: 1.2em;
            color: #333;
            margin: 0 0 5px;
            border-left: 3px solid #febd69;
            padding-left: 10px;
        }
        .modal-info-block p {
            margin: 0;
            font-size: 1em;
            color: #555;
        }
        .modal-price {
            font-size: 1.8em;
            font-weight: bold;
            color: #b12704;
        }
        .modal-delivery p {
            font-size: 0.9em;
            color: #777;
        }
        .modal-footer {
            margin-top: 30px;
            text-align: center;
        }
        .modal-footer .btn-buy-now {
            padding: 15px 40px;
            font-size: 1.1em;
        }
        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            color: #111;
            cursor: pointer;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -60%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .cart-section, .form-section, .cancellation-section {
            background-color: #fff;
            padding: 40px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .cart-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2em;
            text-align: center;
            margin-bottom: 20px;
        }
        .cart-list {
            list-style: none;
            padding: 0;
        }
        .cart-item {
            display: flex;
            flex-direction: column;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            background-color: #f9f9f9;
            border: 1px solid #eee;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .cart-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        .cart-item-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .cart-item-details input {
            flex-grow: 1;
            margin-left: 20px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.9em;
            font-family: 'Lato', Arial, sans-serif;
            transition: border-color 0.3s ease;
        }
        .cart-item-details input:focus {
            outline: none;
            border-color: #004d99;
        }
        .remove-btn {
            background-color: #ffcccc;
            color: #dc3545;
            border: 1px solid #dc3545;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 15px;
            transition: all 0.3s ease;
        }
        .remove-btn:hover {
            background-color: #dc3545;
            color: #fff;
        }
        .promo-code-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .promo-code-container input {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            margin-right: 10px;
            font-size: 1em;
            width: 150px;
        }
        .promo-code-container button {
            background-color: #e6f2ff;
            color: #004d99;
            border: 1px solid #004d99;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .promo-code-container button:hover {
            background-color: #004d99;
            color: #fff;
        }
        .cart-totals {
            text-align: right;
            font-size: 1.2em;
            margin-top: 20px;
            line-height: 1.8;
        }
        .cart-totals .final-price {
            font-size: 1.5em;
            font-weight: bold;
            color: #b12704;
        }
        .discount-applied {
            color: #28a745;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
            font-size: 1em;
        }
        .shipping-options {
            text-align: right;
            margin-top: 10px;
        }
        .shipping-options label {
            margin-left: 20px;
            font-size: 0.9em;
        }
        .form-section {
            padding: 40px;
            margin-bottom: 50px;
        }
        .form-section input {
            display: block;
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Lato', Arial, sans-serif;
            transition: border-color 0.3s ease;
        }
        .form-section input:focus {
            outline: none;
            border-color: #004d99;
        }
        .cancellation-section {
            margin-top: 50px;
            text-align: center;
        }
        .cancellation-section input {
            max-width: 300px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: 1px solid #ccc;
            padding: 12px;
        }
        .cancellation-section button {
            background-color: #ffcccc;
            color: #dc3545;
            border: 1px solid #dc3545;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        .cancellation-section button:hover {
            background-color: #dc3545;
            color: #fff;
        }
        .contract-content-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .contract-content {
            white-space: pre-wrap;
            line-height: 1.5;
            font-family: 'Times New Roman', serif;
            font-size: 0.9em;
            border: 1px solid #ccc;
            padding: 20px;
            margin-top: 20px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .faq-item {
            border-bottom: 1px dashed #ccc;
            padding: 20px 0;
            cursor: pointer;
        }
        .faq-item h3 {
            font-size: 1.2em;
            font-family: 'Playfair Display', serif;
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .faq-item h3 i {
            transition: transform 0.3s ease;
        }
        .faq-item.active h3 i {
            transform: rotate(180deg);
        }
        .faq-answer {
            display: none;
            padding-top: 15px;
            font-size: 1em;
            color: #555;
            line-height: 1.5;
        }
        @media print {
            body > *:not(.contract-section) {
                display: none;
            }
            .contract-section {
                display: block !important;
                position: static !important;
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
                box-shadow: none !important;
                page-break-after: always;
            }
            .contract-content-container {
                width: 100% !important;
                padding: 0 !important;
                box-shadow: none !important;
                border-radius: 0 !important;
            }
        }

        #purchaseHistoryList {
            list-style: none;
            padding: 0;
        }

        .purchase-item {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .purchase-item h4 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.2em;
            color: #004d99;
        }
        .purchase-item p {
            margin: 5px 0;
            font-size: 0.9em;
            color: #555;
        }
        .purchase-details {
            font-weight: bold;
        }

        /* Novas classes para a funcionalidade de busca */
        .search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 998; /* Abaixo do item destacado, mas acima do resto */
            transition: opacity 0.5s ease;
            pointer-events: none;
        }

        .highlighted-product {
            z-index: 999;
            background-color: #fff;
            border: 3px solid #febd69;
            box-shadow: 0 0 20px rgba(254, 189, 105, 0.8), 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            transform: scale(1.05);
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <header class="header-top">
        <div class="logo">
            <a href="#">Loja M&A</a>
        </div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Pesquisar..." onkeydown="handleSearch(event)">
            <button onclick="performSearch()"><i class="fas fa-search"></i></button>
        </div>
        <div class="nav-links">
            <a href="#carrinho" class="cart-link">
                <i class="fas fa-shopping-cart"></i>
                Carrinho
            </a>
            <a href="#historico">
                Hist√≥rico
            </a>
        </div>
    </header>
    
    <div class="slider-container">
        <div class="slide" style="background-image: url('https://picsum.photos/1200/400?random=1');">
            <div class="slide-content">
                <h2>Seu Neg√≥cio Merece um Website Incr√≠vel</h2>
                <p>Crie uma presen√ßa online profissional e atraente. Fale conosco e comece a construir seu futuro digital!</p>
            </div>
        </div>
        <div class="slide" style="background-image: url('https://picsum.photos/1200/400?random=2');">
            <div class="slide-content">
                <h2>Otimize sua Rotina com Nosso Sistema de Ponto</h2>
                <p>Gest√£o de jornada de trabalho f√°cil e eficiente. Mais controle, menos burocracia.</p>
            </div>
        </div>
        <div class="slide" style="background-image: url('https://picsum.photos/1200/400?random=3');">
            <div class="slide-content">
                <h2>Conhe√ßa Nossos Produtos em Destaque!</h2>
                <p>Navegue pela nossa loja e descubra as melhores solu√ß√µes tecnol√≥gicas feitas para voc√™.</p>
            </div>
        </div>
    </div>
    
    <main id="main-content">
        <div class="container">
            <section class="section">
                <h2>Produtos e Servi√ßos</h2>
                <div class="product-grid">
                    <div class="product-item" product-id="portfolio">
                        <span class="badge new">Novo</span>
                        <span class="product-icon">üíº</span>
                        <div class="product-details">
                            <h3>Portf√≥lio Profissional</h3>
                            <p>Criamos um portf√≥lio digital personalizado para voc√™, do seu jeito. Destaque seus projetos e habilidades de forma √∫nica.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">R$ 50,00</span>
                            <button class="btn-buy-now" onclick="addToCart('Portf√≥lio Profissional', 50.00)">Comprar Agora</button>
                        </div>
                    </div>

                    <div class="product-item" product-id="ponto">
                        <span class="badge sale">Promo√ß√£o</span>
                        <span class="product-icon">‚è∞</span>
                        <div class="product-details">
                            <h3>Ponto para Funcion√°rio</h3>
                            <p>Sistema digital e eficiente para controle de jornada de trabalho e gest√£o de ponto.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">R$ 200,00</span>
                            <button class="btn-buy-now" onclick="addToCart('Ponto para Funcion√°rio', 200.00)">Comprar Agora</button>
                        </div>
                    </div>
                    
                    <div class="product-item" product-id="ma-professor">
                        <span class="badge beta">Beta</span>
                        <span class="product-icon">üìö</span>
                        <div class="product-details">
                            <h3>M&A Professor</h3>
                            <p>Plataforma de ensino online. Em fase **beta**, lan√ßamento em **outubro**.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">Gr√°tis</span>
                            <button class="btn-buy-now" onclick="addToCart('M&A Professor', 0.00)">Comprar Agora</button>
                        </div>
                    </div>
                    
                    <div class="product-item" product-id="avaliador">
                        <span class="badge">Novo</span>
                        <span class="product-icon">‚≠ê</span>
                        <div class="product-details">
                            <h3>Avaliador de Produtos</h3>
                            <p>Sistema de reviews e avalia√ß√µes de produtos sob medida para e-commerces.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">R$ 350,00</span>
                            <a href="https://williamnardelli37-beep.github.io/williamnardelli37sai.github.io/" target="_blank" class="btn-buy-now">Acessar 7 Dias Gr√°tis</a>
                        </div>
                    </div>
                    
                    <div class="product-item" product-id="website">
                        <span class="badge">Novo</span>
                        <span class="product-icon">üåê</span>
                        <div class="product-details">
                            <h3>Website Institucional</h3>
                            <p>Cria√ß√£o de sites modernos e responsivos para divulgar sua empresa na web.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">R$ 500,00</span>
                            <button class="btn-buy-now" onclick="addToCart('Website Institucional', 500.00)">Comprar Agora</button>
                        </div>
                    </div>
                    
                    <div class="product-item" product-id="ai-slide-pro">
                        <span class="badge new">Novo</span>
                        <span class="product-icon">ü§ñ</span>
                        <div class="product-details">
                            <h3>AI Slide PRO</h3>
                            <p>Plataforma para criar apresenta√ß√µes din√¢micas e profissionais com intelig√™ncia artificial.</p>
                        </div>
                        <div class="product-info-bottom">
                            <span class="product-price">Gr√°tis</span>
                            <a href="https://williamnardelli37-beep.github.io/.aislidepro.github.io/" target="_blank" class="btn-buy-now">Acessar Gr√°tis</a>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="section cart-section" id="carrinho">
                <h2>Seu Carrinho de Compras</h2>
                <ul id="cartList" class="cart-list"></ul>
                <div class="cart-totals">
                    <p>Subtotal: <span id="cartSubtotal">R$ 0,00</span></p>
                    <p>Desconto: <span id="cartDiscount">R$ 0,00</span></p>
                    <div class="shipping-options">
                        <label>
                            <input type="radio" name="shipping" value="normal" checked onchange="calculateTotals()">
                            Entrega Normal (2 meses): Gr√°tis
                        </label>
                        <label>
                            <input type="radio" name="shipping" value="express" onchange="calculateTotals()">
                            Entrega Expressa (1 m√™s): R$ 20,00
                        </label>
                    </div>
                    <p>Frete: <span id="shippingPrice">R$ 0,00</span></p>
                    <p class="final-price">Total: <span id="cartTotal">R$ 0,00</span></p>
                    <p id="deliveryDate" style="font-weight: bold;"></p>
                </div>
                <hr style="margin: 20px 0; border: 0; border-top: 1px dashed #ccc;">
                <div class="promo-code-container">
                    <input type="text" id="promoCodeInput" placeholder="C√≥digo Promocional">
                    <button onclick="applyPromoCode()">Aplicar</button>
                </div>
                <p id="discountMessage" class="discount-applied" style="display:none;"></p>
            </section>
            
            <section class="section form-section">
                <h2>Seus Dados</h2>
                <input type="text" id="userName" placeholder="Seu Nome">
                <input type="email" id="userEmail" placeholder="Seu E-mail">
                <input type="tel" id="userPhone" placeholder="Seu Telefone (opcional)">
                <div style="display: flex; justify-content: center; gap: 10px;">
                    <a href="#" class="whatsapp-btn" onclick="sendOrderViaWhatsApp()">
                        Finalizar Pedido via WhatsApp
                    </a>
                    <a href="#" class="contract-btn" onclick="generateAndPrintContract()">
                        Gerar Contrato
                    </a>
                </div>
                <div class="cancellation-section">
                    <hr style="margin: 50px 0; border: 0; border-top: 1px dashed #ccc;">
                    <h2>Cancelar Pedido</h2>
                    <p>
                        **Aten√ß√£o:** A compra pode ser cancelada em at√© **7 dias**.
                        O c√≥digo de cancelamento √© v√°lido apenas no dispositivo em que a compra foi realizada.
                    </p>
                    <input type="text" id="cancellationCodeInput" placeholder="C√≥digo de Cancelamento">
                    <button onclick="showCancellationConfirmation()">Cancelar Pedido</button>
                </div>
            </section>
            
            <section class="section" id="historico">
                <h2>Hist√≥rico de Compras</h2>
                <ul id="purchaseHistoryList"></ul>
            </section>

            <section class="section" id="faq-section">
                <h2>Sites Dispon√≠veis e D√∫vidas Frequentes</h2>
                <div class="faq-container">
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <h3>Quais sites e servi√ßos a M&A oferece? <i class="fas fa-chevron-down"></i></h3>
                        <div class="faq-answer">
                            <p>Oferecemos a cria√ß√£o de Websites Institucionais, Portf√≥lios Profissionais, Sistemas de Ponto, e Plataformas como o Avaliador de Produtos e o Gerenciador de Itens. Tamb√©m temos o projeto beta M&A Professor e o AI Slide PRO.</p>
                        </div>
                    </div>
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <h3>Como funciona o sistema de gerenciamento de itens? <i class="fas fa-chevron-down"></i></h3>
                        <div class="faq-answer">
                            <p>Nosso Gerenciador de Itens √© um sistema para organiza√ß√£o e controle de estoque ou cole√ß√µes pessoais. √â um projeto em desenvolvimento, mas voc√™ pode **acessar a vers√£o de teste por 7 dias gr√°tis** clicando no link na se√ß√£o de produtos.</p>
                        </div>
                    </div>
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <h3>Posso criar um site de slides? <i class="fas fa-chevron-down"></i></h3>
                        <div class="faq-answer">
                            <p>Sim! Voc√™ pode acessar o **AI Slide PRO**, uma plataforma gratuita de intelig√™ncia artificial para criar apresenta√ß√µes profissionais de forma simples e r√°pida.</p>
                        </div>
                    </div>
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <h3>Qual √© o prazo de entrega dos projetos? <i class="fas fa-chevron-down"></i></h3>
                        <div class="faq-answer">
                            <p>Ap√≥s a confirma√ß√£o do pagamento, a previs√£o de entrega √© de 2 meses. Detalhes espec√≠ficos de cada projeto s√£o discutidos durante a finaliza√ß√£o do pedido via WhatsApp.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
    
    <section class="contract-section" style="display:none;">
        <div class="container contract-content-container">
            <h2 style="text-align: center; margin-bottom: 5px;">Contrato de Compra e Venda</h2>
            <p style="text-align: center; font-style: italic; font-size: 1em;">Gerado em <span id="contractDate"></span></p>
            <div class="contract-content" id="contractContent"></div>
        </div>
    </section>

    <div id="productModal" class="modal">
        <span class="close-btn" onclick="closeModal('productModal')">&times;</span>
        <div class="modal-header">
            <h3 id="modalProductName"></h3>
        </div>
        <div class="modal-content-details">
            <div class="modal-info-block">
                <h4>Descri√ß√£o:</h4>
                <p id="modalProductDescription"></p>
            </div>
            <div class="modal-info-block">
                <h4>Valor:</h4>
                <p id="modalProductValue"></p>
            </div>
            <div class="modal-info-block">
                <h4>Pre√ßo:</h4>
                <p class="modal-price" id="modalProductPrice"></p>
            </div>
            <div class="modal-info-block modal-delivery">
                <h4>Prazo de Entrega:</h4>
                <p id="modalDeliveryNormal"></p>
                <p id="modalDeliveryExpress"></p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-buy-now" id="modalBuyNowBtn">Comprar Agora</button>
        </div>
    </div>
    
    <div id="cancellationModal" class="modal cancellation-modal">
        <span class="close-btn" onclick="closeModal('cancellationModal')">&times;</span>
        <h3>Confirmar Cancelamento</h3>
        <p>Voc√™ tem certeza que deseja cancelar o seguinte pedido?</p>
        <div id="cancellationDetails" style="text-align: left; margin: 20px 0;"></div>
        <div class="modal-buttons">
            <button class="btn btn-yes" onclick="confirmCancellation()">Sim, Cancelar</button>
            <button class="btn btn-no" onclick="closeModal('cancellationModal')">N√£o</button>
        </div>
    </div>
    <div id="modalOverlay" class="modal-overlay" onclick="closeModal()"></div>

    <div id="promoPopup" class="promo-popup">
        <span class="close-btn" onclick="closePopup()">&times;</span>
        <h3>Quer um Site Incr√≠vel?</h3>
        <p>Receba uma consultoria gratuita para seu projeto e garanta 15% de desconto no seu primeiro servi√ßo!</p>
        <a href="https://wa.me/5554993243670?text=Ol√°, vim do seu site e gostaria de saber mais sobre a promo√ß√£o de Desenvolvimento Web!" target="_blank" onclick="closePopup()">Falar no WhatsApp!</a>
    </div>

    <footer>
        <div class="footer-links">
            <a href="#">Condi√ß√µes de Uso</a> |
            <a href="#">Pol√≠tica de Privacidade</a> |
            <a href="#">Ajuda</a>
        </div>
        <p>&copy; 2025 Loja M&A. Todos os direitos reservados.</p>
    </footer>

    <audio id="cashRegisterSound" src="https://www.free-stock-music.com/sound-effects-library-cash-register-sound.mp3"></audio>

    <script>
        let slideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const productItems = document.querySelectorAll('.product-item');
        const productModal = document.getElementById('productModal');
        const cancellationModal = document.getElementById('cancellationModal');
        const modalOverlay = document.getElementById('modalOverlay');
        let cart = [];
        let discount = 0;
        let cancellationData = null;
        const promoCode = "MUNDODASAVALIACOES2025";
        const discountRate = 0.15;
        const phoneNumber = "5554993243670";
        const cashRegisterAudio = document.getElementById('cashRegisterSound');
        const searchKeywords = {
            'slides': 'ai-slide-pro',
            'gerenciador': 'gerenciador-tarefas',
            'website': 'website',
            'site': 'website',
            'ponto': 'ponto',
            'portf√≥lio': 'portfolio',
            'professor': 'ma-professor',
            'avaliador': 'avaliador'
        };

        const productData = {
            'portfolio': {
                name: 'Portf√≥lio Profissional',
                price: 50.00,
                description: 'Criamos um portf√≥lio digital personalizado para voc√™, do seu jeito. Destaque seus projetos e habilidades de forma √∫nica e profissional. Perfeito para designers, programadores e artistas.',
                value: 'Tenha uma presen√ßa online que impressiona e atrai novos clientes. Mostre seu trabalho de maneira organizada e acess√≠vel.',
                delivery: { normal: '2 meses', express: '1 m√™s' }
            },
            'ponto': {
                name: 'Ponto para Funcion√°rio',
                price: 200.00,
                description: 'Sistema digital e eficiente para controle de jornada de trabalho, gest√£o de ponto e relat√≥rios. Otimize a rotina da sua empresa e reduza a burocracia com uma ferramenta simples e robusta.',
                value: 'Mais controle sobre a jornada de trabalho, menos erros em folha de pagamento e total conformidade com as leis trabalhistas.',
                delivery: { normal: '2 meses', express: '1 m√™s' }
            },
            'ma-professor': {
                name: 'M&A Professor',
                price: 0.00,
                description: 'Plataforma de ensino online projetada para professores e educadores que desejam criar e gerenciar cursos. Em fase **beta**, lan√ßamento em **outubro**.',
                value: 'Acesso antecipado a uma plataforma intuitiva e completa para digitalizar seu conte√∫do educacional e alcan√ßar mais alunos.',
                delivery: { normal: 'Imediato', express: 'Imediato' }
            },
            'avaliador': {
                name: 'Avaliador de Produtos',
                price: 350.00,
                description: 'Sistema de reviews e avalia√ß√µes de produtos sob medida para e-commerces. Permita que seus clientes deixem feedback, criando uma prova social que aumenta suas vendas.',
                value: 'Aumente a credibilidade da sua loja virtual e a confian√ßa dos seus clientes, o que leva a um crescimento nas convers√µes.',
                delivery: { normal: '2 meses', express: '1 m√™s' }
            },
            'website': {
                name: 'Website Institucional',
                price: 500.00,
                description: 'Cria√ß√£o de sites modernos, responsivos e otimizados para divulgar sua empresa na web. Apresente seus servi√ßos, hist√≥ria e contato de forma profissional e acess√≠vel em qualquer dispositivo.',
                value: 'Construa uma presen√ßa digital s√≥lida, atraia novos clientes e estabele√ßa sua marca como uma autoridade no seu mercado.',
                delivery: { normal: '2 meses', express: '1 m√™s' }
            },
            'ai-slide-pro': {
                name: 'AI Slide PRO',
                price: 0.00,
                description: 'Plataforma para criar apresenta√ß√µes din√¢micas e profissionais com intelig√™ncia artificial. Crie slides incr√≠veis em minutos, sem esfor√ßo.',
                value: 'Crie apresenta√ß√µes de alto impacto visual de forma r√°pida e intuitiva, economizando tempo e esfor√ßo.',
                delivery: { normal: 'Imediato', express: 'Imediato' }
            }
        };

        function showSlides() {
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active');
            }
            slideIndex++;
            if (slideIndex > slides.length) {
                slideIndex = 1;
            }
            slides[slideIndex - 1].classList.add('active');
            setTimeout(showSlides, 5000);
        }

        async function addToCart(productName, productPrice) {
            cart.push({ name: productName, price: productPrice, description: '' });
            saveCart();
            updateCart();
            alert(`${productName} adicionado ao carrinho!`);
            
            try {
                await cashRegisterAudio.play();
            } catch (err) {
                console.log("Audio playback failed, likely due to browser autoplay policy.");
            }
            
            closeModal('productModal');
            window.location.href = "#carrinho";
        }

        function handleSearch(event) {
            if (event.key === "Enter") {
                performSearch();
            }
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            const productItems = document.querySelectorAll('.product-item');
            let found = false;

            for (let i = 0; i < productItems.length; i++) {
                const product = productItems[i];
                const productName = product.querySelector('h3').textContent.toLowerCase();
                if (productName.includes(query)) {
                    // Encontrado o produto, rolamos at√© ele e o destacamos
                    product.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    // Cria e adiciona o overlay
                    const overlay = document.createElement('div');
                    overlay.classList.add('search-overlay');
                    document.body.appendChild(overlay);

                    // Adiciona a classe de destaque ao produto
                    product.classList.add('highlighted-product');

                    // Remove o destaque e o overlay ap√≥s 1 segundo
                    setTimeout(() => {
                        product.classList.remove('highlighted-product');
                        document.body.removeChild(overlay);
                    }, 1000);

                    found = true;
                    break;
                }
            }

            if (!found) {
                alert("Nenhum item encontrado. Tente pesquisar por palavras como 'website', 'ponto', 'portf√≥lio' ou 'avaliador'.");
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            showSlides();
            loadCart();
            updateCart();
            loadPurchaseHistory();
            setTimeout(function() {
                document.getElementById('promoPopup').style.display = 'block';
            }, 3000);

            productItems.forEach(item => {
                const productId = item.getAttribute('product-id');
                if (productId) {
                    item.addEventListener('click', (event) => {
                         // Evita abrir o modal se clicar no bot√£o "acessar"
                        if (event.target.closest('.free-trial-btn') || event.target.closest('a')) {
                            return;
                        }
                        showProductDetails(productId);
                    });
                }
            });
        });

        function showProductDetails(productId) {
            const product = productData[productId];
            if (!product) {
                console.error('Product not found:', productId);
                return;
            }

            document.getElementById('modalProductName').textContent = product.name;
            document.getElementById('modalProductDescription').textContent = product.description;
            document.getElementById('modalProductValue').textContent = product.value;
            document.getElementById('modalProductPrice').textContent = `R$ ${product.price.toFixed(2).replace('.', ',')}`;
            document.getElementById('modalDeliveryNormal').textContent = `Entrega Normal: ${product.delivery.normal}`;
            document.getElementById('modalDeliveryExpress').textContent = `Entrega Expressa: ${product.delivery.express}`;

            const buyNowBtn = document.getElementById('modalBuyNowBtn');
            buyNowBtn.onclick = () => {
                addToCart(product.name, product.price);
            };

            productModal.style.display = 'block';
            modalOverlay.style.display = 'block';
        }

        function closeModal(modalId = 'all') {
            if (modalId === 'all') {
                productModal.style.display = 'none';
                cancellationModal.style.display = 'none';
                modalOverlay.style.display = 'none';
            } else {
                document.getElementById(modalId).style.display = 'none';
                modalOverlay.style.display = 'none';
            }
        }

        function loadCart() {
            cart = JSON.parse(localStorage.getItem('cart')) || [];
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function updateCart() {
            const cartList = document.getElementById('cartList');
            cartList.innerHTML = '';
            
            let subtotal = 0;
            
            if (cart.length === 0) {
                cartList.innerHTML = '<p style="text-align: center; color: #555;">Nenhum item no carrinho.</p>';
            } else {
                cart.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.className = 'cart-item';
                    li.innerHTML = `
                        <div class="cart-item-details">
                            <span>${item.name} - R$ ${item.price.toFixed(2).replace('.', ',')}</span>
                            <button class="remove-btn" onclick="removeFromCart(${index})"><i class="fas fa-trash-alt"></i> Remover</button>
                        </div>
                        <input type="text" placeholder="Adicione uma descri√ß√£o..." id="desc-${index}" value="${item.description}">
                    `;
                    cartList.appendChild(li);
                    subtotal += item.price;
                });
            }
            
            document.getElementById('cartSubtotal').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
            calculateTotals();
            saveCart();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        function calculateTotals() {
            let subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            let discountAmount = subtotal * discount;
            let finalTotal = subtotal - discountAmount;
            
            let shippingPrice = 0;
            const shippingOption = document.querySelector('input[name="shipping"]:checked').value;
            if (shippingOption === 'express') {
                shippingPrice = 20.00;
            }

            finalTotal += shippingPrice;

            document.getElementById('cartDiscount').textContent = `R$ ${discountAmount.toFixed(2).replace('.', ',')}`;
            document.getElementById('shippingPrice').textContent = `R$ ${shippingPrice.toFixed(2).replace('.', ',')}`;
            document.getElementById('cartTotal').textContent = `R$ ${finalTotal.toFixed(2).replace('.', ',')}`;
            
            if (hasPaidItem()) {
                document.getElementById('deliveryDate').textContent = 'Previs√£o de Entrega: ' + calculateDeliveryDate(shippingOption);
            } else {
                document.getElementById('deliveryDate').textContent = '';
            }
        }

        function hasPaidItem() {
            return cart.some(item => item.price > 0);
        }

        function calculateDeliveryDate(shippingOption) {
            const today = new Date();
            let monthsToAdd = 2;
            if (shippingOption === 'express') {
                monthsToAdd = 1;
            }
            today.setMonth(today.getMonth() + monthsToAdd);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return today.toLocaleDateString('pt-BR', options);
        }

        function applyPromoCode() {
            const code = document.getElementById('promoCodeInput').value.trim().toUpperCase();
            const discountMessage = document.getElementById('discountMessage');
            
            if (code === promoCode) {
                discount = discountRate;
                discountMessage.textContent = `C√≥digo '${promoCode}' aplicado! Voc√™ ganhou 15% de desconto.`;
                discountMessage.style.display = 'block';
            } else {
                discount = 0;
                discountMessage.textContent = "C√≥digo inv√°lido.";
                discountMessage.style.display = 'block';
            }
            
            calculateTotals();
        }

        function generateCancellationCode() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            const charactersLength = characters.length;
            for (let i = 0; i < 8; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }

        function validateEmail(email) {
            const hotmailPattern = /@hotmail\.com$/i;
            const gmailPattern = /@gmail\.com$/i;
            return hotmailPattern.test(email) || gmailPattern.test(email);
        }

        function savePurchase(orderData) {
            let history = JSON.parse(localStorage.getItem('purchaseHistory')) || [];
            history.push(orderData);
            localStorage.setItem('purchaseHistory', JSON.stringify(history));
        }

        function loadPurchaseHistory() {
            const historyList = document.getElementById('purchaseHistoryList');
            historyList.innerHTML = '';
            const history = JSON.parse(localStorage.getItem('purchaseHistory')) || [];

            if (history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: #555;">Nenhum pedido no hist√≥rico.</p>';
                return;
            }

            history.forEach(order => {
                const li = document.createElement('li');
                li.className = 'purchase-item';
                let itemsHtml = order.items.map(item => `<li>${item.name} - R$ ${item.price.toFixed(2).replace('.', ',')}</li>`).join('');
                li.innerHTML = `
                    <h4>Pedido #${order.code}</h4>
                    <p><strong>Data:</strong> ${new Date(order.timestamp).toLocaleDateString('pt-BR')}</p>
                    <p><strong>Itens:</strong></p>
                    <ul>${itemsHtml}</ul>
                    <p class="purchase-details"><strong>Total:</strong> R$ ${order.total.toFixed(2).replace('.', ',')}</p>
                `;
                historyList.appendChild(li);
            });
        }

        function sendOrderViaWhatsApp() {
            if (cart.length === 0) {
                alert("Seu carrinho est√° vazio. Adicione produtos antes de finalizar o pedido.");
                return;
            }
            const userName = document.getElementById('userName').value.trim();
            const userEmail = document.getElementById('userEmail').value.trim();
            const userPhone = document.getElementById('userPhone').value.trim();

            if (!userName || !userEmail) {
                alert("Por favor, preencha seu nome e e-mail antes de finalizar o pedido.");
                document.getElementById('userName').focus();
                return false;
            }

            if (!validateEmail(userEmail)) {
                alert("Por favor, use um e-mail Hotmail ou Gmail para prosseguir com a compra.");
                document.getElementById('userEmail').focus();
                return false;
            }
            
            const cancellationCode = generateCancellationCode();
            const timestamp = new Date().getTime();
            
            const currentOrder = {
                code: cancellationCode,
                timestamp: timestamp,
                userName: userName,
                userEmail: userEmail,
                userPhone: userPhone,
                items: cart.map((item, index) => ({
                    name: item.name,
                    price: item.price,
                    description: document.getElementById(`desc-${index}`).value.trim()
                })),
                subtotal: cart.reduce((sum, item) => sum + item.price, 0),
                discount: discount,
                shipping: document.querySelector('input[name="shipping"]:checked').value,
                total: 0
            };
            const finalTotal = currentOrder.subtotal - (currentOrder.subtotal * currentOrder.discount) + (currentOrder.shipping === 'express' ? 20.00 : 0.00);
            currentOrder.total = finalTotal;

            localStorage.setItem('lastOrder', JSON.stringify(currentOrder));
            savePurchase(currentOrder);
            
            let orderMessage = "Ol√°, gostaria de fazer um pedido!\n\n";
            orderMessage += `*Dados do Cliente:*\n`;
            orderMessage += `Nome: ${userName}\n`;
            orderMessage += `Email: ${userEmail}\n`;
            if (userPhone) {
                orderMessage += `Telefone: ${userPhone}\n`;
            }
            orderMessage += `\n--- Detalhes do Pedido ---\n\n`;

            currentOrder.items.forEach(item => {
                const itemDescription = item.description ? ` - Obs: "${item.description}"` : '';
                orderMessage += `*${item.name}* ${itemDescription}\n`;
            });

            orderMessage += "\n--- Totais ---\n";
            orderMessage += `Subtotal: R$ ${currentOrder.subtotal.toFixed(2).replace('.', ',')}\n`;
            if (currentOrder.discount > 0) {
                orderMessage += `Desconto: - R$ ${(currentOrder.subtotal * currentOrder.discount).toFixed(2).replace('.', ',')}\n`;
                orderMessage += `C√≥digo usado: ${promoCode}\n`;
            }
            orderMessage += `Frete (${currentOrder.shipping === 'express' ? '1 m√™s' : '2 meses'}): R$ ${ (currentOrder.shipping === 'express' ? 20.00 : 0.00).toFixed(2).replace('.', ',')}\n`;
            orderMessage += `Total Final: R$ ${currentOrder.total.toFixed(2).replace('.', ',')}`;
            orderMessage += `\n\n*C√≥digo de Cancelamento:* ${cancellationCode}`;
            orderMessage += `\n\n**Aten√ß√£o:** Seu pedido foi recebido e a equipe da Loja M&A ir√° entrar em contato em at√© 24 horas para liberar o pagamento e confirmar os detalhes.`;
            
            alert(`Pedido finalizado! Seu c√≥digo de cancelamento √©: ${cancellationCode}\nGuarde-o para futuras refer√™ncias.`);
            const encodedMessage = encodeURIComponent(orderMessage);
            const whatsappLink = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            localStorage.removeItem('cart');
            cart = [];
            updateCart();
            loadPurchaseHistory();
            window.open(whatsappLink, '_blank');
        }

        function showCancellationConfirmation() {
            const inputCode = document.getElementById('cancellationCodeInput').value.trim().toUpperCase();
            const history = JSON.parse(localStorage.getItem('purchaseHistory')) || [];
            
            cancellationData = history.find(order => order.code === inputCode);

            if (!cancellationData) {
                alert("C√≥digo de cancelamento inv√°lido ou pedido n√£o encontrado neste dispositivo.");
                return;
            }

            const sevenDaysInMs = 7 * 24 * 60 * 60 * 1000;
            const now = new Date().getTime();
            if (now - cancellationData.timestamp > sevenDaysInMs) {
                alert("O c√≥digo de cancelamento expirou. O prazo de 7 dias para o cancelamento foi excedido.");
                return;
            }

            const detailsDiv = document.getElementById('cancellationDetails');
            detailsDiv.innerHTML = `
                <p><strong>Pedido:</strong> #${cancellationData.code}</p>
                <p><strong>Data da Compra:</strong> ${new Date(cancellationData.timestamp).toLocaleDateString('pt-BR')}</p>
                <p><strong>Itens:</strong></p>
                <ul>
                    ${cancellationData.items.map(item => `<li>${item.name} - R$ ${item.price.toFixed(2).replace('.', ',')}</li>`).join('')}
                </ul>
                <p><strong>Total:</strong> R$ ${cancellationData.total.toFixed(2).replace('.', ',')}</p>
            `;

            cancellationModal.style.display = 'block';
            modalOverlay.style.display = 'block';
        }

        function confirmCancellation() {
            if (!cancellationData) {
                alert("Ocorreu um erro. Por favor, tente novamente.");
                closeModal('cancellationModal');
                return;
            }
            
            const cancellationMessage = `Ol√°, gostaria de solicitar o cancelamento do meu pedido. O c√≥digo de cancelamento √©: ${cancellationData.code}`;
            const encodedMessage = encodeURIComponent(cancellationMessage);
            const whatsappLink = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;

            let history = JSON.parse(localStorage.getItem('purchaseHistory')) || [];
            history = history.filter(order => order.code !== cancellationData.code);
            localStorage.setItem('purchaseHistory', JSON.stringify(history));

            closeModal('cancellationModal');
            document.getElementById('cancellationCodeInput').value = '';
            alert("Sua solicita√ß√£o de cancelamento foi enviada. Aguarde a confirma√ß√£o da nossa equipe.");
            loadPurchaseHistory();

            window.open(whatsappLink, '_blank');
        }
        
        function prepareForPrint() {
            document.getElementById('main-content').style.display = 'none';
            document.querySelector('.contract-section').style.display = 'block';
        }

        function restoreFromPrint() {
            document.getElementById('main-content').style.display = 'block';
            document.querySelector('.contract-section').style.display = 'none';
        }

        function generateAndPrintContract() {
            const userName = document.getElementById('userName').value.trim();
            const userEmail = document.getElementById('userEmail').value.trim();
            const userPhone = document.getElementById('userPhone').value.trim();
            if (!userName || !userEmail) {
                alert("Por favor, preencha seu nome e e-mail para gerar o contrato.");
                document.getElementById('userName').focus();
                return false;
            }

            if (!validateEmail(userEmail)) {
                alert("Por favor, use um e-mail Hotmail ou Gmail para prosseguir com a compra.");
                document.getElementById('userEmail').focus();
                return false;
            }
            
            if (cart.length === 0) {
                alert("Adicione itens ao carrinho antes de gerar o contrato.");
                return false;
            }
            const storedData = JSON.parse(localStorage.getItem('lastOrder'));
            const cancellationCode = storedData ? storedData.code : 'N√£o Gerado';
            const today = new Date().toLocaleDateString('pt-BR');
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            const discountAmount = subtotal * discount;
            const shippingPrice = document.querySelector('input[name="shipping"]:checked').value === 'express' ? 20.00 : 0.00;
            const finalTotal = subtotal - discountAmount + shippingPrice;
            
            let productsList = '';
            cart.forEach(item => {
                productsList += `- ${item.name} (R$ ${item.price.toFixed(2).replace('.', ',')})\n`;
            });
            const contractText = `
**CONTRATO DE COMPRA E VENDA DE PRODUTOS E SERVI√áOS DIGITAIS**

**IDENTIFICA√á√ÉO DAS PARTES CONTRATANTES:**

**CONTRATADA:** Loja M&A.

**CONTRATANTE:** ${userName || 'N√£o informado'}, e-mail: ${userEmail || 'N√£o informado'}, telefone: ${userPhone || 'N√£o informado'}.

As partes acima identificadas t√™m, entre si, justo e acertado o presente Contrato de Compra e Venda de Produtos e Servi√ßos, que se reger√° pelas cl√°usulas seguintes e pelas condi√ß√µes de pre√ßo, forma e termo de pagamento descritas no presente.

**CL√ÅUSULA PRIMEIRA ‚Äì DO OBJETO**
O presente contrato tem por objeto os seguintes produtos e/ou servi√ßos:
${productsList}

**CL√ÅUSULA SEGUNDA ‚Äì DO PRE√áO E DAS CONDI√á√ïES DE PAGAMENTO**
Pela compra dos produtos e/ou servi√ßos digitais descritos na Cl√°usula Primeira, o CONTRATANTE pagar√° √† CONTRATADA o valor total de R$ ${finalTotal.toFixed(2).replace('.', ',')}.
As condi√ß√µes de pagamento ser√£o acordadas diretamente com a CONTRATADA por meio do contato via WhatsApp.

**CL√ÅUSULA TERCEIRA ‚Äì DAS OBRIGA√á√ïES**
A CONTRATADA se compromete a entregar os produtos e/ou servi√ßos no prazo acordado de 2 meses, a partir da confirma√ß√£o do pagamento.
O CONTRATANTE se compromete a fornecer todas as informa√ß√µes e recursos necess√°rios para a execu√ß√£o dos servi√ßos.

**CL√ÅUSULA QUARTA ‚Äì DO CANCELAMENTO**
O CONTRATANTE pode cancelar o pedido em at√© **7 (sete) dias** a partir da data de compra, utilizando o c√≥digo de cancelamento gerado no momento do pedido.
**C√≥digo de Cancelamento:** ${cancellationCode}

**CL√ÅUSULA QUINTA ‚Äì DO FORO**
Para dirimir quaisquer controv√©rsias oriundas do CONTRATO, as partes elegem o foro da comarca de Caxias do Sul, RS.

E, por estarem assim justos e contratados, firmam o presente instrumento.

_________________________
Caxias do Sul, RS, ${today}

_________________________________
**Loja M&A**
CONTRATADA

_________________________________
**${userName}**
CONTRATANTE
`;

            document.getElementById('contractDate').textContent = today;
            document.getElementById('contractContent').textContent = contractText;
            
            prepareForPrint();
            window.print();
        }

        window.onafterprint = function() {
            restoreFromPrint();
            if (confirm("Seu contrato foi impresso! Deseja enviar o pedido via WhatsApp agora?")) {
                sendOrderViaWhatsApp();
            }
        };

        function closePopup() {
            document.getElementById('promoPopup').style.display = 'none';
        }

        function toggleFaq(item) {
            const answer = item.querySelector('.faq-answer');
            const icon = item.querySelector('i');
            if (answer.style.display === 'block') {
                answer.style.display = 'none';
                item.classList.remove('active');
            } else {
                answer.style.display = 'block';
                item.classList.add('active');
            }
        }
    </script>
</body>
</html>
